<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>播放器</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/gobal.css" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<style>
			.listTiteBar span {
				padding-right: 20px;
				font-size: 24px;
			}
			
			.listTiteBar a {
				color: gray;
				padding-left: 20px;
				font-size: 20px;
				transition: 0.3s;
			}
			
			.listContent {
				padding-top: 15px;
				padding-bottom: 10px;
			}
			
			.listTiteBar a:hover {
				color: orangered;
			}
			
			.table>tbody>tr {
				transition: 0.3s;
			}
			
			.indexSpan {
				display: inline;
			}
			
			.playSpan {
				display: none;
			}
			
			.table>tbody>tr:hover .indexSpan {
				display: none;
			}
			
			.table>tbody>tr:hover .playSpan {
				display: inline;
			}
			
			.indexTd {
				width: 40px;
				text-align: center;
			}
			
			.table>tbody>tr>td {
				height: 50px;
				vertical-align: middle;
				border: 0px solid white;
			}
		</style>
	</head>

	<body>
		<nav class="navbar navbar-default navbar-fixed-top" style="background: white;">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<a href="#"><img style="margin-top: 10px;margin-right: 15px;" src="img/logoko_small.png"></a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li>
							<a href="#"><strong>发现音乐</strong></a>
						</li>
						<li>
							<a href="#">我的音乐</a>
						</li>
						<li>
							<a href="#">动态</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a href="#">欢迎您，Tim</a>
						</li>
						<li class="dropdown">
							<img src="img/timg.jpg" style="margin-top: 10px;" class="img-circle avatarSmall dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" />
							<ul class="dropdown-menu">
								<li>
									<a href="#">修改信息</a>
								</li>
								<li>
									<a href="#">修改密码</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a href="#">退出登录</a>
								</li>
							</ul>
						</li>
					</ul>
					<form class="navbar-form navbar-right">
						<div class="form-group">
							<div class="input-group">
								<input type="text" class="form-control" placeholder="站内搜索">
								<span class="input-group-btn">
		          					<button type="submit" class="btn btn-default">搜索</button>
		          				</span>
							</div>
						</div>
					</form>
				</div>
			</div>
		</nav>

		<div class="container" style="padding: 0px;background: white;">
			<div class="post" style=" min-height: 700px;">
				<div id="mainRow" class="row">
					<div class="post">
						<div class="listTiteBar">
							<span>搜索结果</span>
							<a>音乐</a>
							<a>专辑</a>
							<a>歌单</a>
							<a>歌手</a>
						</div>
						<div class="listContent" style="display: none;">
							<table class="table table-striped table-hover">
								<thead>
									<th class="indexTd">#</th>
									<th>歌曲</th>
									<th>歌手</th>
									<th>专辑</th>
									<th>时长</th>
								</thead>
								<tbody>
									<tr>
										<td class="indexTd"><span class="indexSpan">1</span><span class="icon glyphicon-play-circle icon-orange playSpan"></span></td>
										<td>12313123</td>
										<td>123</td>
										<td>123</td>
										<td>123</td>
									</tr>
									<tr>
										<td class="indexTd"><span class="indexSpan">2</span><span class="icon glyphicon-play-circle icon-orange playSpan"></span></td>
										<td>13123</td>
										<td>123</td>
										<td>123</td>
										<td>123</td>
									</tr>
									<tr>
										<td class="indexTd"><span class="indexSpan">3</span><span class="icon glyphicon-play-circle icon-orange playSpan"></span></td>
										<td>123123</td>
										<td>123</td>
										<td>123</td>
										<td>123</td>
									</tr>
									<tr>
										<td class="indexTd"><span class="indexSpan">4</span><span class="icon glyphicon-play-circle icon-orange playSpan"></span></td>
										<td>123123</td>
										<td>123</td>
										<td>123</td>
										<td>123</td>
									</tr>
								</tbody>
							</table>
							<nav aria-label="Page navigation">
								<ul class="pagination">
									<li>
										<a href="#" aria-label="Previous">
											<span aria-hidden="true">&laquo;</span>
										</a>
									</li>
									<li>
										<a href="#">1</a>
									</li>
									<li>
										<a href="#">2</a>
									</li>
									<li>
										<a href="#">3</a>
									</li>
									<li>
										<a href="#">4</a>
									</li>
									<li>
										<a href="#">5</a>
									</li>
									<li>
										<a href="#" aria-label="Next">
											<span aria-hidden="true">&raquo;</span>
										</a>
									</li>
								</ul>
							</nav>
						</div>
						<div class="listContent">
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<div class="mediaBox">
								<div class="InputCoverBox">
									<div class="InputCover3"></div>
									<div class="InputCover2"></div>
									<div class="InputCover1" style="background-image: url(img/lamp.jpg);">
										<div class="InputCoverClickNumBox">
											<span class="icon glyphicon-play"></span> 5000
										</div>
										<div class="InputCoverOperationBar">
											<span class="fa fa-play-circle-o icon-orange" aria-hidden="true"></span>
										</div>
									</div>
								</div>
								<div class="mediaInfo">
									<div class="mediaName">
										<span>lamp</span>
									</div>
									<div class="mediaAuthor">
										<span>α·pav</span>
									</div>
									<div class="mediaAuthor">
										<span>2019-5-10</span>
									</div>
								</div>
							</div>
							<nav aria-label="Page navigation">
								<ul class="pagination">
									<li>
										<a href="#" aria-label="Previous">
											<span aria-hidden="true">&laquo;</span>
										</a>
									</li>
									<li>
										<a href="#">1</a>
									</li>
									<li>
										<a href="#">2</a>
									</li>
									<li>
										<a href="#">3</a>
									</li>
									<li>
										<a href="#">4</a>
									</li>
									<li>
										<a href="#">5</a>
									</li>
									<li>
										<a href="#" aria-label="Next">
											<span aria-hidden="true">&raquo;</span>
										</a>
									</li>
								</ul>
							</nav>
						</div>
					</div>
				</div>
			</div>
			<div id="footer" class="footer"></div>
		</div>

		<!--播放器-->

		<div class="playerListBox">
			<div class="playerList"></div>
		</div>
		<div class="navbar-fixed-bottom" style="background: white;border-top: ghostwhite 1px solid;">
			<div class="container">
				<div class="col-lg-12">
					<div class="playerBar notSelect">
						<div class="coverBar">
							<div class="coverBox">
								<img class="img-thumbnail coverImg" src="img/default_album.jpg" />
							</div>
							<div class="coverMusicNameBox">
								<span class="coverMusicName">一个得过且过的勇者</span>
							</div>
							<div class="coverAuthormNameBox">
								<span class="coverAuthorName">α·pav</span>
							</div>
						</div>
						<div class="controllerBar">
							<div class="preButton">
								<span class='icon glyphicon-step-backward icon-sm icon-red'></span>
							</div>
							<div id="Play" class="playButton">
								<span class="icon glyphicon-play icon-default icon-red"></span>
							</div>
							<div class="nextButton">
								<span class="icon glyphicon-step-forward icon-sm icon-red"></span>
							</div>
						</div>
						<div class="processBar">
							<div class="processAll"></div>
							<div class="processNow"></div>
							<div class="processButton"></div>
							<div class="songInfoBox">
								<span class="songInfo">00:00&nbsp;|&nbsp;00:00</span>
							</div>
						</div>
						<div class="othersBar">
							<div class="loveButton">
								<span class="fa fa-heart-o fa-icon-sm icon-red"></span>
							</div>
							<div class="listButton">
								<span class="fa fa-bars fa-icon-sm  icon-black"></span>
							</div>
							<div class="lrcButton">
								<span class="icon fa-icon-sm icon-black">词</span>
							</div>
							<div class="moreButton">
								<div class="dropup">
									<span class="icon glyphicon-option-horizontal fa-icon-sm  icon-black" data-toggle="dropdown"></span>
									<ul class="dropdown-menu">
										<li>
											<a href="#">下载</a>
										</li>
										<li>
											<a href="#">评论</a>
										</li>
										<li>
											<a href="#">加入歌单</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script>
		$(document).ready(function() {
			var $audio = $(window.parent.frames["musicPlayerFrame"].document).find("#player");
			var audio = $(window.parent.frames["musicPlayerFrame"].document).find("#player").get(0);
			var isdragProcessBar = false;

			if($("#Play").children().hasClass('glyphicon-play') && !audio.paused) {
				$("#Play").children("span").removeClass("glyphicon-play").addClass("glyphicon-pause");
			}
			$(".playerBar").show(500);
			$("#Play").on('click', function() {
				if(audio.paused) {
					if($(this).children().hasClass('glyphicon-play')) {
						Play();
					}
				} else {
					Pause();
				}
			}); // Button cilick

			function Play() {
				$("#Play").children("span").removeClass("glyphicon-play").addClass("glyphicon-pause");
				audio.play();
			} //Play()

			$audio.on("play", TimeSpan());
			$audio.on("pause", function() {
				if(audio.ended) {
					audio.currentTime = 0;
					audio.src = "res/Arne_Haruka Nakamura.mp3";
					Play();
				}
			});

			function Pause() {
				$("#Play").children("span").removeClass("glyphicon-pause").addClass("glyphicon-play");
				audio.pause();
			} //Pause()

			function TimeSpan() {
				if(!isdragProcessBar) {
					var ProcessNow = 0;
					setInterval(function() {
						ProcessNow = (audio.currentTime / audio.duration) * 280;
						$(".processNow").css("width", ProcessNow);
						$(".processButton").css("left", ProcessNow);
						var currentTime = timeFormat(audio.currentTime);
						var timeAll = timeFormat(TimeAll());
						$(".songInfo").html(currentTime + " / " + timeAll);
					}, 1000);
				}
			} //TimeSpan()
			function timeFormat(number) {
				var minute = parseInt(number / 60);
				var second = parseInt(number % 60);
				minute = minute >= 10 ? minute : "0" + minute;
				second = second >= 10 ? second : "0" + second;
				return minute + ":" + second;
			} //timeFormat()

			function TimeAll() {
				return audio.duration;
			} //TimeAll()

			var oldX = 0;
			var left = 0;
			var pleft = 0;
			var pleftAll = $(".processAll").width();
			var newLeft = 0;
			$(".processButton").on("mousedown", function(e) {
				oldX = e.pageX;
				left = 0;
				isdragProcessBar = true;
				pleft = $(".processButton").position().left;
				$("#isDrag").html("true ");
			})
			$(document).on("mousemove", function(e) {
				if(isdragProcessBar) {
					left = e.pageX - oldX;
					newLeft = left + pleft;
					if(newLeft < 0) {
						newLeft = 0;
					}
					if(newLeft > pleftAll) {
						newLeft = pleftAll;
					}
					var perDuration = newLeft / $(".processAll").width();
					var time = TimeAll() * perDuration;
					audio.currentTime = time;
					var currentTime = timeFormat(time);
					var timeAll = timeFormat(TimeAll());
					$(".songInfo").html(currentTime + " | " + timeAll);
					$(".processNow").css("width", newLeft);
					$(".processButton").css("left", newLeft);
				}
			})
			$(document).on("mouseup", function() {
				isdragProcessBar = false;
				$("#isDrag").html("false");
			})

			$(".lrcButton").on("click", function() {
				if($(".listButton").find("span").hasClass("icon-red")) {
					$(".listButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				}
				if($(".lrcButton").find("span").hasClass("icon-red")) {
					$(".lrcButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				} else if($(".lrcButton").find("span").hasClass("icon-black")) {
					$(".lrcButton").find("span").removeClass("icon-black").addClass("icon-red");
					$('.playerListBox').fadeToggle(200);
				}
			})

			$(".listButton").on("click", function() {
				if($(".lrcButton").find("span").hasClass("icon-red")) {
					$(".lrcButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				}
				if($(".listButton").find("span").hasClass("icon-red")) {
					$(".listButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				} else if($(".listButton").find("span").hasClass("icon-black")) {
					$(".listButton").find("span").removeClass("icon-black").addClass("icon-red");
					$('.playerListBox').fadeToggle(200);
				}
			})

			$(".loveButton").on("click", function() {
				if($(".loveButton").find("span").hasClass("fa-heart-o")) {
					$(".loveButton").find("span").removeClass("fa-heart-o").addClass("fa-heart");
				} else if($(".loveButton").find("span").hasClass("fa-heart")) {
					$(".loveButton").find("span").removeClass("fa-heart").addClass("fa-heart-o");
				}
			})
		})
	</script>

</html>