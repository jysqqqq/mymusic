<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>播放器</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/gobal.css" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<style>
			.musicCoverBox {
				margin-top: 20px;
				padding: 10px;
				width: 100%;
			}
			
			.key-valueBox .keySpan {
				color: gray;
				margin-right: 3px;
			}
			
			.musicCover {
				width: 200px;
				height: 200px;
			}
			
			.musicBtnGroup {
				padding-top: 10px;
				padding-bottom: 10px;
			}
			
			.lrcBox {
				padding: 10px 0px;
				width: 500px;
			}
			
			.musicCommentBoxTitle {
				padding-top: 10px;
				padding-bottom: 5px;
				border-bottom: 2px solid black;
			}
			
			.inputCommentBox {
				position: relative;
				width: 100%;
				height: 190px;
			}
			
			.inputCommentAvatar {
				display: inline-block;
				position: absolute;
				top: 15px;
				left: 10px;
				width: 90px;
				height: 90px;
			}
			
			.inputComment {
				display: inline-block;
				position: absolute;
				top: 15px;
				left: 110px;
				width: 700px;
				height: 110px;
			}
			
			.comment {
				position: relative;
				padding: 0px;
				width: 100%;
				min-height: 75px;
				margin-bottom: 10px;
			}
			
			.commentLeft {
				position: absolute;
				top: 0px;
				width: 60px;
				min-height: 75px;
				display: inline-block;
			}
			
			.commentRight {
				position: relative;
				top: 0px;
				left: 65px;
				width: 700px;
				min-height: 75px;
				display: inline-block;
			}
			
			.commentUserInfo {
				position: relative;
				height: 20px;
				margin-bottom: 2px;
				top: 0px;
				font-size: 16px;
				color: #3C3C3C;
				font-weight: 500;
				display: block;
			}
			
			.commentContent {
				position: relative;
				font-size: 16px;
				color: #3C3C3C;
			}
			
			.commentInfo {
				position: relative;
				font-size: 14px;
				color: gray;
				bottom: 0px;
			}
			
			.commentInfo a{
				padding: 0px 10px;
				color: gray;
			}
		</style>
	</head>

	<body>
		<nav class="navbar navbar-default navbar-fixed-top" style="background: white;">
			<div class="container">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<a href="#"><img style="margin-top: 10px;margin-right: 15px;" src="img/logoko_small.png"></a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li>
							<a href="#"><strong>发现音乐</strong></a>
						</li>
						<li>
							<a href="#">我的音乐</a>
						</li>
						<li>
							<a href="#">动态</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a href="#">欢迎您，Tim</a>
						</li>
						<li class="dropdown">
							<img src="img/timg.jpg" style="margin-top: 10px;" class="img-circle avatarSmall dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" />
							<ul class="dropdown-menu">
								<li>
									<a href="#">修改信息</a>
								</li>
								<li>
									<a href="#">修改密码</a>
								</li>
								<li role="separator" class="divider"></li>
								<li>
									<a href="#">退出登录</a>
								</li>
							</ul>
						</li>
					</ul>
					<form class="navbar-form navbar-right">
						<div class="form-group">
							<div class="input-group">
								<input type="text" class="form-control" placeholder="站内搜索">
								<span class="input-group-btn">
		          					<button type="submit" class="btn btn-default">搜索</button>
		          				</span>
							</div>
						</div>
					</form>
				</div>
			</div>
		</nav>

		<div class="container" style="padding: 0px;background: white;">
			<div class="post" style="min-height: 700px;">
				<div id="mainRow" class="row clearfix">
					<div class="col-lg-3">
						<div class="musicCoverBox">
							<img src="img/lamp.jpg" class="img-circle img-thumbnail musicCover center-block" />
						</div>
					</div>
					<div class="col-lg-9">
						<div class="musicDetailBox">
							<div class="titleBar">
								<h3>这里是歌曲的名字</h3>
								<div class="key-valueBox">
									<span class="keySpan">所属专辑 :</span>
									<a>lamp</a>
								</div>
								<div class="key-valueBox">
									<span class="keySpan">作者 :</span>
									<a>α·pav</a>
								</div>
							</div>
							<div class="musicBtnGroup">
								<button class="btn btn-primary"><span class="icon glyphicon-play"></span> 播放</button>
								<button class="btn btn-primary"><span class="icon glyphicon-share"></span> 分享</button>
								<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseLrc" aria-expanded="false" aria-controls="collapseExample"><span class="icon glyphicon-text-background"></span> 歌词</button>
								<hr />
							</div>
							<div class="lrcBox">
								<div class="collapse" id="collapseLrc">
									<div class="well">
										<h4>歌词</h4>
										<br />
										<p>123123</p>
										<p>123123</p>
										<p>131231231</p>
										<p>sadfasdf</p>
										<p>asdfasdfafas</p>
										<p>123123</p>
										<p>123123</p>
										<p>131231231</p>
										<p>sadfasdf</p>
										<p>asdfasdfafas</p>
										<p>123123</p>
										<p>123123</p>
										<p>131231231</p>
										<p>sadfasdf</p>
										<p>asdfasdfafas</p>
									</div>
								</div>
							</div>
						</div>
						<div class="musicCommentBox">
							<div class="musicCommentBoxTitle">
								<h3>评论</h3>
							</div>
							<div class="inputCommentBox">
								<div class="inputCommentAvatar">
									<img src="img/timg.jpg" class="img-circle img-thumbnail avatarController">
								</div>
								<div class="inputComment">
									<form>
										<div class="form-group">
											<textarea id="InputInfo" name="info" class="form-control" rows="3" placeholder="评论"></textarea>
										</div>
										<button class="pull-right btn btn-info">提交</button>
									</form>
								</div>
							</div>
							<div class="commentAreaBox">
								<hr />
								<!--a comment-->
								<div class="comment">
									<div class="commentLeft">
										<img src="img/timg.jpg" class="img-circle img-thumbnail avatarLarge" />
									</div>
									<div class="commentRight">
										<div class="commentUserInfo">用户名</div>
										<div class="commentContent">
											<p>safasdf<br>dfafaf</div>
										<div class="commentInfo"><span>2019-12-15</span><a>删除</a></div>
									</div>
									<hr />
								</div>
								<!--/a comment-->
								<!--a comment-->
								<div class="comment">
									<div class="commentLeft">
										<img src="img/timg.jpg" class="img-circle img-thumbnail avatarLarge" />
									</div>
									<div class="commentRight">
										<div class="commentUserInfo">用户名</div>
										<div class="commentContent">
											<p>safasdf<br>dfafaf<br>dfafaf</div>
										<div class="commentInfo"><span>2019-12-15</span><a>删除</a></div>
									</div>
									<hr />
								</div>
								<!--/a comment-->
							</div>
						</div>
					</div>

				</div>
			</div>
			<div id="footer" class="footer"></div>
		</div>

		<!--播放器-->

		<div class="playerListBox">
			<div class="playerList"></div>
		</div>
		<div class=" navbar-fixed-bottom" style="background: white;border-top: ghostwhite 1px solid;">
			<div class="container">
				<div class="col-lg-12">
					<div class="playerBar notSelect">
						<div class="coverBar">
							<div class="coverBox">
								<img class="img-thumbnail coverImg" src="img/default_album.jpg" />
							</div>
							<div class="coverMusicNameBox">
								<span class="coverMusicName">一个得过且过的勇者</span>
							</div>
							<div class="coverAuthormNameBox">
								<span class="coverAuthorName">α·pav</span>
							</div>
						</div>
						<div class="controllerBar">
							<div class="preButton">
								<span class='icon glyphicon-step-backward icon-sm icon-red'></span>
							</div>
							<div id="Play" class="playButton">
								<span class="icon glyphicon-play icon-default icon-red"></span>
							</div>
							<div class="nextButton">
								<span class="icon glyphicon-step-forward icon-sm icon-red"></span>
							</div>
						</div>
						<div class="processBar">
							<div class="processAll"></div>
							<div class="processNow"></div>
							<div class="processButton"></div>
							<div class="songInfoBox">
								<span class="songInfo">00:00&nbsp;|&nbsp;00:00</span>
							</div>
						</div>
						<div class="othersBar">
							<div class="loveButton">
								<span class="fa fa-heart-o fa-icon-sm icon-red"></span>
							</div>
							<div class="listButton">
								<span class="fa fa-bars fa-icon-sm  icon-black"></span>
							</div>
							<div class="lrcButton">
								<span class="icon fa-icon-sm icon-black">词</span>
							</div>
							<div class="moreButton">
								<div class="dropup">
									<span class="icon glyphicon-option-horizontal fa-icon-sm  icon-black" data-toggle="dropdown"></span>
									<ul class="dropdown-menu">
										<li>
											<a href="#">下载</a>
										</li>
										<li>
											<a href="#">评论</a>
										</li>
										<li>
											<a href="#">加入歌单</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script>
		$(document).ready(function() {
			var $audio = $(window.parent.frames["musicPlayerFrame"].document).find("#player");
			var audio = $(window.parent.frames["musicPlayerFrame"].document).find("#player").get(0);
			var isdragProcessBar = false;

			if($("#Play").children().hasClass('glyphicon-play') && !audio.paused) {
				$("#Play").children("span").removeClass("glyphicon-play").addClass("glyphicon-pause");
			}
			$(".playerBar").show(500);
			$("#Play").on('click', function() {
				if(audio.paused) {
					if($(this).children().hasClass('glyphicon-play')) {
						Play();
					}
				} else {
					Pause();
				}
			}); // Button cilick

			function Play() {
				$("#Play").children("span").removeClass("glyphicon-play").addClass("glyphicon-pause");
				audio.play();
			} //Play()

			$audio.on("play", TimeSpan());
			$audio.on("pause", function() {
				if(audio.ended) {
					audio.currentTime = 0;
					audio.src = "res/Arne_Haruka Nakamura.mp3";
					Play();
				}
			});

			function Pause() {
				$("#Play").children("span").removeClass("glyphicon-pause").addClass("glyphicon-play");
				audio.pause();
			} //Pause()

			function TimeSpan() {
				if(!isdragProcessBar) {
					var ProcessNow = 0;
					setInterval(function() {
						ProcessNow = (audio.currentTime / audio.duration) * 280;
						$(".processNow").css("width", ProcessNow);
						$(".processButton").css("left", ProcessNow);
						var currentTime = timeFormat(audio.currentTime);
						var timeAll = timeFormat(TimeAll());
						$(".songInfo").html(currentTime + " / " + timeAll);
					}, 1000);
				}
			} //TimeSpan()
			function timeFormat(number) {
				var minute = parseInt(number / 60);
				var second = parseInt(number % 60);
				minute = minute >= 10 ? minute : "0" + minute;
				second = second >= 10 ? second : "0" + second;
				return minute + ":" + second;
			} //timeFormat()

			function TimeAll() {
				return audio.duration;
			} //TimeAll()

			var oldX = 0;
			var left = 0;
			var pleft = 0;
			var pleftAll = $(".processAll").width();
			var newLeft = 0;
			$(".processButton").on("mousedown", function(e) {
				oldX = e.pageX;
				left = 0;
				isdragProcessBar = true;
				pleft = $(".processButton").position().left;
				$("#isDrag").html("true ");
			})
			$(document).on("mousemove", function(e) {
				if(isdragProcessBar) {
					left = e.pageX - oldX;
					newLeft = left + pleft;
					if(newLeft < 0) {
						newLeft = 0;
					}
					if(newLeft > pleftAll) {
						newLeft = pleftAll;
					}
					var perDuration = newLeft / $(".processAll").width();
					var time = TimeAll() * perDuration;
					audio.currentTime = time;
					var currentTime = timeFormat(time);
					var timeAll = timeFormat(TimeAll());
					$(".songInfo").html(currentTime + " | " + timeAll);
					$(".processNow").css("width", newLeft);
					$(".processButton").css("left", newLeft);
				}
			})
			$(document).on("mouseup", function() {
				isdragProcessBar = false;
				$("#isDrag").html("false");
			})

			$(".lrcButton").on("click", function() {
				if($(".listButton").find("span").hasClass("icon-red")) {
					$(".listButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				}
				if($(".lrcButton").find("span").hasClass("icon-red")) {
					$(".lrcButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				} else if($(".lrcButton").find("span").hasClass("icon-black")) {
					$(".lrcButton").find("span").removeClass("icon-black").addClass("icon-red");
					$('.playerListBox').fadeToggle(200);
				}
			})

			$(".listButton").on("click", function() {
				if($(".lrcButton").find("span").hasClass("icon-red")) {
					$(".lrcButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				}
				if($(".listButton").find("span").hasClass("icon-red")) {
					$(".listButton").find("span").removeClass("icon-red").addClass("icon-black");
					$('.playerListBox').fadeToggle(200);
				} else if($(".listButton").find("span").hasClass("icon-black")) {
					$(".listButton").find("span").removeClass("icon-black").addClass("icon-red");
					$('.playerListBox').fadeToggle(200);
				}
			})

			$(".loveButton").on("click", function() {
				if($(".loveButton").find("span").hasClass("fa-heart-o")) {
					$(".loveButton").find("span").removeClass("fa-heart-o").addClass("fa-heart");
				} else if($(".loveButton").find("span").hasClass("fa-heart")) {
					$(".loveButton").find("span").removeClass("fa-heart").addClass("fa-heart-o");
				}
			})
		})
	</script>

</html>