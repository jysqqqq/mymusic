<!DOCTYPE html>

<html>

	<head>
		<meta charset="utf-8" />
		<title>后台管理-查找专辑</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/gobal.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
	</head>
	<style>
		.albumControllerBar {
			position: relative;
			overflow-y: scroll;
			height: 650px;
		}
		
		.albumControllerBar::-webkit-scrollbar {
			display: none;
		}
		
		.albumBtnGroup {
			position: relative;
			margin-top: 30px;
		}
		
		.table input {
			/*可输入区域样式*/
			width: 100%;
			height: 100%;
			border: none;
			/* 输入框不要边框 */
			font-family: Arial;
			background: rgba(0, 0, 0, 0);
		}
		
		.tdAlbumId,
		.tdUploaderId,
		.trClone {
			display: none;
		}
	</style>

	<body>
		<nav class="navbar navbar-default navBar">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">后台管理</a>
				</div>
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a>欢迎您,张三</a>
						</li>
					</ul>
					<ul class="nav  navbar-right">
						<li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
									<img class="img-circle avatarSmall" src="img/timg.jpg" />
								</a>
								<ul class="dropdown-menu ">
									<li>
										<a href="# "><span class="glyphicon glyphicon-edit"></span> 编辑信息</a>
									</li>
									<li>
										<a href="# "><span class="glyphicon glyphicon-cog "></span> 修改密码</a>
									</li>
									<li role="separator" class="divider"></li>
									<li>
										<a href="# "><span class="glyphicon glyphicon-off"></span> 退出登录</a>
									</li>
								</ul>
							</li>
						</li>
					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>
		<div class="pull-left asideBar">
			<div class="selfWidget">
				<div style="display: inline;width: 45px;float: left;margin-right: 10px;">
					<img class="img-circle avatarMedium" src="img/timg.jpg" style="display: inline-block" />
				</div>
				<div style="display: inline;width: 45px;">
					<div style="width: 120px;height: 25px;float: left;">
						<span class="widgetNameText">张三-高级管理员</span>
					</div>
					<a href="#">
						<div class="widgetLogoutBox">
							<span class="glyphicon glyphicon-off widgetOperationText"> 注销</span>
						</div>
					</a>
				</div>
			</div>
			<hr style="background-color: gray; height: 1px; border: none;margin-left: 15px; margin-right: 25px;" />
			<ul style="padding-left: 0; ">
				<li class="operationLi ">
					<span class="operationText "><span class="glyphicon glyphicon-edit"></span> 管理员管理</span>
				</li>
				<li class="operationLi ">
					<span class="operationMinText "><span class="glyphicon glyphicon-search "></span> 查找管理员</span>
				</li>
				<li class="operationLi ">
					<span class="operationMinText "><span class="glyphicon glyphicon-plus "></span> 添加管理员</span>
				</li>
				<li class="operationLi ">
					<span class="operationText "><span class="glyphicon glyphicon-user "></span> 用戶管理</span>
				</li>
				<li class="operationLi ">
					<span class="operationMinText "><span class="glyphicon glyphicon-search "></span> 查找用戶</span>
				</li>
				<li class="operationLi ">
					<span class="operationText "><span class="glyphicon glyphicon-cd"></span> 资源管理</span>
				</li>
				<li class="operationLi ">
					<span class="operationMinText "><span class="glyphicon glyphicon-search "></span> 查找专辑</span>
				</li>
				<li class="operationLi ">
					<span class="operationMinText "><span class="glyphicon glyphicon-plus "></span> 添加专辑</span>
				</li>
			</ul>
		</div>

		<div>
			<div class="container">
				<div class="mainBar">
					<h1 class="text-center">添加音乐</h1>
					<br />
					<div class="panel panel-info">
						<div class="panel-heading">
							添加一张新专辑
						</div>
						<div class="panel-body" style="height: 700px;">
							<form method="post" enctype="multipart/form-data">
								<div class="col-sm-3">
									<div class="InputCoverBox">
										<div class="InputCover3"></div>
										<div class="InputCover2"></div>
										<div class="InputCover1"></div>
									</div>
								</div>
								<div class="col-sm-9">
									<div class="albumControllerBar">
										<h3>专辑名字xxx</h3>
										<div class="albumBtnGroup">
											<button type="button" class="btn btn-info" onclick="$('#InputMusicFiles').click();">添加音乐</button>
											<input id="InputMusicFiles" type="file" multiple="multiple" accept="audio/*" style="display: none;" />
											<button id="InputLrcFilesBtn" type="button" class="btn btn-success" onclick="$('#InputLrcFiles').click();"  style="display: none;">添加歌词</button>
											<input id="InputLrcFiles" type="file" multiple="multiple" accept=".lrc" style="display: none;" />
											<form>
												<button id="submitBtn" type="submit" class="btn btn-default" style="display: none;" >保存</button>
												<hr/>
												<table class="table table-striped table-hover">
													<thead>
														<th>#</th>
														<th>歌曲</th>
														<th>歌手</th>
														<th>类型</th>
														<th>操作</th>
													</thead>
													<tbody>
														<tr class="trClone">
															<td class="tdIndex"></td>
															<td class="tdName"><input type="text" value="" readonly="readonly"></td>
															<td class="tdPlayer"><input type="text" value=""></td>
															<td class="tdType">
																<select>
																	<option value="1">流行 Pop</option>
																	<option value="2">摇滚 Rock</option>
																	<option value="3">民谣/乡村 Folk/Country</option>
																	<option value="4">电子 Electronic</option>
																	<option value="5">古风 Gufeng</option>
																	<option value="6">流行 Pop</option>
																	<option value="7">摇滚 Rock</option>
																	<option value="8">民谣/乡村 Folk/Country</option>
																	<option value="9">电子 Electronic</option>
																	<option value="10">古风 Gufeng</option>
																	<option value="9">电子 Electronic</option>
																	<option value="11">古风 Gufeng</option>
																	<option value="9">电子 Electronic</option>
																	<option value="12">古风 Gufeng</option>
																</select>
															</td>
															<td class="tdAlbumId"><input type="text" value=""></td>
															<td class="tdUploaderId"><input type="text" value=""></td>
															<td>
																<a href="#" class="btn btn-info btn-sm">添加歌词</a>
															</td>
														</tr>
													</tbody>
												</table>
											</form>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

	</body>
	<script type="text/javascript ">
		$(document).ready(function() {

			$("#InputMusicFiles").change(function() {
				var mfileList = $("#InputMusicFiles")[0].files;
				if(mfileList.length != 0) {
					$("#InputLrcFilesBtn").fadeIn("200");
					$("#submitBtn").fadeIn("200");
					$("tbody tr").not(":first").remove();
					for(var i = 0; i < mfileList.length; i++) {
						addTr();
					}
					flushTable();
				}
			})
		});

		function addTr() {
			var $td = $(".trClone").clone(); //增加一行,克隆第一个对象
			$td.removeClass("trClone");
			$(".table").append($td);
		}

		function flushTable() {
			var index = 1;
			var _mfileList = $("#InputMusicFiles")[0].files;
			$(".tdIndex").not(":first").each(function() {
				$(this).html(index);
				index++;
			})
			index = 0;
			$(".tdName").not(":first").each(function() {
				var dot = _mfileList[index].name.lastIndexOf(".");
				var name = _mfileList[index].name.substring(0, dot);
				$(this).children("input").val(name);
				$(this).children("input").attr("name", "musicList[" + index + "].name");
				index++;
			})
			index = 0;
			$(".tdPlayer").not(":first").each(function() {
				$(this).children("input").val("α·pav");
				$(this).children("input").attr("name", "musicList[" + index + "].player");
				index++;
			})
			index = 0;
			$(".tdType").not(":first").each(function() {
				$(this).children("select").attr("name", "musicList[" + index + "].type");
				index++;
			})
			index = 0;
			$(".tdUploaderId").not(":first").each(function() {
				$(this).children("input").val("");
				$(this).children("input").attr("name", "musicList[" + index + "].uploaderId");
				index++;
			})
			index = 0;
			$(".tdAlbumId").not(":first").each(function() {
				$(this).children("input").val("");
				$(this).children("input").attr("name", "musicList[" + index + "].albumId");
				index++;
			})			
			
			$("select").on("dblclick",function(){
				var opt = $(this).find("option:selected").val();
				$("select").not(":first").each(function() {
					$(this).val(opt);
				})
			});

		}
		
	</script>

</html>